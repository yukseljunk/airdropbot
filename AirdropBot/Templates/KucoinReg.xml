<?xml version="1.0"?>
<steps>
  <navigate url="about:blank"/>
  <clearcookies/>
  <navigate url="https://www.kucoin.com/#/signup" proxy="${2}"/>
  <wait for="2"/>
  <scroll height="20000"/>
  <wait for="2"/>
  <click xpath="//*[@class='ant-checkbox-input']" />
  <wait for="2"/>
  <click xpath="//*[text()='Next']"/>
  <wait for="5"/>
  <snap xpath="//*[@id='email']"  x="%50" y="%160"/>
  <sendkey value="${0}"/>
  <wait for="2"/>

  <snap xpath="//*[@id='password']"  x="%50" y="%160"/>
  <sendkey value="${1}"/>
  <wait for="2"/>

  <snap xpath="//*[@id='confirm']"  x="%50" y="%160"/>
  <sendkey value="${1}"/>
  <wait for="2"/>


  <snap xpath="//*[text()='Next']" x="%50" y="%160"/>
  <wait for="3"/>

  <waittill compare="Email Activation" what="innerText" timeout="0" xpath="//*[text()='Email Activation']" regex=""/>


  <mail user="${0}" pass="${3}">
    <wait for="2"/>
    <search text="kucoin"/>
    <wait for="2"/>
    <get param="ulker" what="getAttribute('href')" xpath="//*[text() = 'valid=pending']" regex=""/>
    <wait for="2"/>
  </mail>
  <wait for="2"/>


  <navigate url="about:blank"/>
  <clearcookies/>
  <navigate url="${ulker}" proxy="${2}"/>

  <wait for="5"/>

  <navigate url="https://www.kucoin.com/#/login" proxy="${2}"/>

  <wait for="8"/>

  <set value="" xpath="//*[@id='username']" />
  <snap xpath="//*[@id='username']"  x="%50" y="%160"/>

  <sendkey value="${0}"/>
  <wait for="2"/>
  <snap xpath="//*[@id='password']"  x="%50" y="%160"/>
  <sendkey value="${1}"/>
  <wait for="3"/>


  <snap xpath="//span[text()='Log in']" x="%50" y="%160"/>
  <wait for="8"/>
  <click xpath="//*[contains(@class,'iconOut')]" waitforbrowser="true"/>
  <wait for="3"/>


</steps>